$(function(){var f=$("#item-template").html(),g=Handlebars.compile(f),c=$("#items"),d=$("#refresh-icon"),b={selectedFeed:"top",selectFeed:function(a){this.selectedFeed=a;this.loadItems();$("#itemListToolbar a").removeClass("active");$("#"+a).addClass("active")},iframeLoadComplete:function(){$("#loadingIndicator").hide()},iframeLoadBegin:function(){$("#loadingIndicator").show()},loadItems:function(){this.loadingItems();$.getJSON("/"+b.selectedFeed+".json",function(a){c.html("");a.forEach(function(a){c.append(g(a))});
b.itemsLoaded()})},loadingItems:function(){d.addClass("disabled")},itemsLoaded:function(){d.removeClass("disabled")},resizeItemsList:function(){$("#items").css("height",$(window).height()-30)}};b.resizeItemsList();b.loadItems();$(window).resize(function(){b.resizeItemsList()});$("#refresh").click(function(a){a.preventDefault();b.loadItems()});$("#top").click(function(a){a.preventDefault();b.selectFeed("top")});$("#newest").click(function(a){a.preventDefault();b.selectFeed("newest")});$(".item").live("click",
function(a){if(!$(a.target).parent().hasClass("go_to_site")){b.iframeLoadBegin();var e=$(a.currentTarget);$(".selected").removeClass("selected");e.addClass("selected");a.preventDefault();$("#itemContent").attr("src",e.find("h2 a").attr("href"))}});$(".item .comments a").live("click",function(a){a.stopPropagation();var a=$(a.currentTarget),b=a.parents("div.item");$(".selected").removeClass("selected");b.addClass("selected");$("#itemContent").attr("src",a.attr("href"));return!1});$("#itemContent").load(function(){b.iframeLoadComplete()})});
